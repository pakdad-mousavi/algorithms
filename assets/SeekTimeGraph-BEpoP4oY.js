import{r as D,c as F,y as G,z as O,h as f,o as p,e as r,F as m,i as _,q as k,p as A,m as I}from"./index-DsFppI_X.js";const z={fcfs:({headPosition:a,diskRequests:x})=>[a,...x],sstf:({headPosition:a,diskRequests:x})=>{const u=[...x],h=[a];let n=a;for(;u.length>0;){let c=0,o=Math.abs(n-u[0]);for(let e=1;e<u.length;e++){const t=Math.abs(n-u[e]);t<o&&(o=t,c=e)}const i=u.splice(c,1)[0];h.push(i),n=i}return h},scan:({headPosition:a,diskRequests:x,headDirection:u})=>{const c=[a,...x];c.indexOf(0)===-1&&c.push(0),c.indexOf(199)===-1&&c.push(199);const o=c.sort((s,l)=>s-l),i=o.indexOf(a);let e;u==="left"?e=o.splice(0,i+1).reverse():(e=o.splice(i,o.length),o.reverse());const t=e.concat(o);return console.log(t),t},look:({headPosition:a,diskRequests:x,headDirection:u})=>{const n=[a,...x].sort((e,t)=>e-t),c=n.indexOf(a);let o;u==="left"?o=n.splice(0,c+1).reverse():(o=n.splice(c,n.length),n.reverse());const i=o.concat(n);return console.log(i),i}},re=(a,x,u,h="left")=>{const n={headPosition:a,diskRequests:x,headDirection:h},c=z[u],o=c(n);let i=0;for(let e=1;e<o.length;e++)i+=Math.abs(o[e]-o[e-1]);return{orderedRequests:o,totalSeekTime:i}},P={viewBox:"0 0 800 552",class:"w-full h-full mb-4",xmlns:"http://www.w3.org/2000/svg"},$={class:"stroke-[1.5px] stroke-white"},H=["x2"],K=["x1","x2"],B=["x1","x2"],X={stroke:"gray","stroke-opacity":"0.5"},U=["x1","x2"],V=["x1","y1"],Y=["values","begin"],Q=["values","begin"],W=["x","y"],j={key:0},J=["x1","x2","y1","y2"],Z=["x1","x2","y1","y2"],ee=["cx","cy"],te={class:"p-2 mx-auto font-medium text-center border rounded-md bg-zinc-800 border-zinc-700 w-72"},g=700,R=450,y=50,v=100,b=9,se=200,S=30,w=200,q=400,le={__name:"SeekTimeGraph",props:{orderedRequests:{type:Array,required:!0},totalSeekTime:{type:Number,required:!0}},setup(a){const x=a,u=R/(x.orderedRequests.length+1),h=D(!1),n=F(()=>{const e=[];let t=1;for(const s of x.orderedRequests){const l={x:s/se*g+y,y:t*u+v};e.push(l),t++}return e}),c=e=>{const t={top:10,right:6,left:20},s=n.value[e],l=n.value[e+1],d=y+S,M=g+y-S;let T=s.x+t.right,C=s.y-t.top;const L=s.x>d,N=s.x>M,E=l&&l.x>s.x;return L&&(N||E)&&(T=s.x-t.left),{x:T,y:C}},o=e=>{const t=b+1;return e/t*g+y},i=(e,t=!1)=>t?`transition-delay: ${q*e+w}ms;`:q*e+w;return G(()=>{h.value=!0}),O(()=>{h.value=!1}),(e,t)=>(p(),f(m,null,[(p(),f("svg",P,[t[1]||(t[1]=r("text",{x:"45",y:"60",class:"fill-white"},"0",-1)),t[2]||(t[2]=r("text",{x:"735",y:"60",class:"fill-white"},"199",-1)),t[3]||(t[3]=r("defs",null,[r("pattern",{id:"diagonalLines",patternUnits:"userSpaceOnUse",width:"10",height:"10",class:"-translate-x-[1px]"},[r("circle",{r:"0.5",cx:"1",cy:"1","stroke-width":"1",class:"fill-zinc-600"})])],-1)),r("rect",{x:y,y:v,width:g,height:R,class:"stroke-2 stroke-zinc-700",fill:"url(#diagonalLines)"}),r("g",$,[r("line",{x1:y,y1:v,x2:y+g-1,y2:v},null,8,H),r("line",{x1:y,y1:"70",x2:y,y2:"130"}),(p(!0),f(m,null,_(n.value,({x:s},l)=>(p(),f("line",{x1:s,y1:"90",x2:s,y2:"110",class:A(["duration-300 opacity-0",{"opacity-100":h.value}]),style:k(i(l,!0))},null,14,K))),256)),r("line",{x1:g+y,y1:"70",x2:g+y,y2:"130"},null,8,B)]),r("g",X,[(p(),f(m,null,_(b,s=>r("line",{x1:o(s),y1:"101",x2:o(s),y2:"549","stroke-dasharray":"10,5",class:"stroke-[1px] stroke-neutral-700"},null,8,U)),64))]),r("g",null,[(p(!0),f(m,null,_(n.value.slice(0,n.value.length-1),({x:s,y:l},d)=>(p(),f("line",{x1:s,y1:l,class:A(["duration-300 opacity-0 stroke-1 stroke-white",{"!opacity-100":h.value}]),"stroke-dasharray":"10,5","stroke-dashoffset":"0",style:k(i(d,!0))},[t[0]||(t[0]=r("animate",{attributeName:"stroke-dashoffset",from:"0",to:"-15",dur:"1s",repeatCount:"indefinite"},null,-1)),r("animate",{attributeName:"x2",values:`${s};${n.value[d+1].x}`,dur:"300ms",begin:`${i(d)}ms`,fill:"freeze"},null,8,Y),r("animate",{attributeName:"y2",values:`${l};${n.value[d+1].y}`,dur:"300ms",begin:`${i(d)}ms`,fill:"freeze"},null,8,Q)],14,V))),256))]),r("g",null,[(p(!0),f(m,null,_(n.value,({x:s,y:l},d)=>(p(),f("g",{class:A(["duration-300 opacity-0",{"!opacity-100":h.value}]),style:k(i(d,!0))},[r("text",{x:c(d).x,y:c(d).y,class:"text-xs fill-white"},I(a.orderedRequests[d]),9,W),d===0?(p(),f("g",j,[r("line",{x1:s-5,x2:s+5,y1:l+5,y2:l-5,class:"stroke-2 stroke-rose-600","stroke-linecap":"round"},null,8,J),r("line",{x1:s+5,x2:s-5,y1:l+5,y2:l-5,class:"stroke-2 stroke-rose-600","stroke-linecap":"round"},null,8,Z)])):(p(),f("circle",{key:1,r:"3",cx:s,cy:l,class:"stroke-1 fill-rose-500 stroke-rose-600 animate-breathe",style:k(`transform-origin: ${s}px ${l}px`)},null,12,ee))],6))),256))])])),r("div",te," Total Seek Time: "+I(a.totalSeekTime),1)],64))}};export{le as _,re as r};
