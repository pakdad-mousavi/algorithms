import{r as O,c as E,y as D,z as F,h,o as p,e as l,F as _,i as m,q as A,p as T,m as R}from"./index-BMxRTfMx.js";const G={fcfs:({headPosition:c,diskRequests:d})=>[c,...d],sstf:({headPosition:c,diskRequests:d})=>{const u=[...d],x=[c];let o=c;for(;u.length>0;){let r=0,s=Math.abs(o-u[0]);for(let e=1;e<u.length;e++){const n=Math.abs(o-u[e]);n<s&&(s=n,r=e)}const a=u.splice(r,1)[0];x.push(a),o=a}return x},scan:({headPosition:c,diskRequests:d,headDirection:u})=>{const r=[c,...d];r.indexOf(0)===-1&&r.push(0),r.indexOf(199)===-1&&r.push(199);const s=r.sort((t,i)=>t-i),a=s.indexOf(c);let e;return u==="left"?e=s.splice(0,a+1).reverse():(e=s.splice(a,s.length),s.reverse()),e.concat(s)},look:({headPosition:c,diskRequests:d,headDirection:u})=>{const o=[c,...d].sort((e,n)=>e-n),r=o.indexOf(c);let s;return u==="left"?s=o.splice(0,r+1).reverse():(s=o.splice(r,o.length),o.reverse()),s.concat(o)},cScan:({headPosition:c,diskRequests:d,headDirection:u})=>{const r=[c,...d];r.indexOf(0)===-1&&r.push(0),r.indexOf(199)===-1&&r.push(199);const s=r.sort((t,i)=>t-i),a=s.indexOf(c);let e;return u==="left"?(e=s.splice(0,a+1).reverse(),s.reverse()):e=s.splice(a,s.length),e.concat(s)}},re=(c,d,u,x="left")=>{const o={headPosition:c,diskRequests:d,headDirection:x},r=G[u],s=r(o);let a=0;for(let e=1;e<s.length;e++)a+=Math.abs(s[e]-s[e-1]);return{orderedRequests:s,totalSeekTime:a}},z={viewBox:"0 0 800 552",class:"w-full h-full mb-4",xmlns:"http://www.w3.org/2000/svg"},$={class:"stroke-[1.5px] stroke-white"},H=["x2"],P=["x1","x2"],X=["x1","x2"],B={stroke:"gray","stroke-opacity":"0.5"},U=["x1","x2"],V=["x1","y1"],Y=["values","begin"],Q=["values","begin"],W=["x","y"],j={key:0},J=["x1","x2","y1","y2"],Z=["x1","x2","y1","y2"],ee=["cx","cy"],te={class:"p-2 mx-auto font-medium text-center border rounded-md bg-zinc-800 border-zinc-700 w-72"},g=700,I=450,y=50,k=100,M=9,se=200,q=30,S=200,b=400,le={__name:"SeekTimeGraph",props:{orderedRequests:{type:Array,required:!0},totalSeekTime:{type:Number,required:!0}},setup(c){const d=c,u=I/(d.orderedRequests.length+1),x=O(!1),o=E(()=>{const e=[];let n=1;for(const t of d.orderedRequests){const i={x:t/se*g+y,y:n*u+k};e.push(i),n++}return e}),r=e=>{const n={top:10,right:6,left:20},t=o.value[e],i=o.value[e+1],f=y+q,C=g+y-q;let v=t.x+n.right,w=t.y-n.top;const N=t.x>f,K=t.x>C,L=i&&i.x>t.x;return N&&(K||L)&&(v=t.x-n.left),{x:v,y:w}},s=e=>{const n=M+1;return e/n*g+y},a=(e,n=!1)=>n?`transition-delay: ${b*e+S}ms;`:b*e+S;return D(()=>{x.value=!0}),F(()=>{x.value=!1}),(e,n)=>(p(),h(_,null,[(p(),h("svg",z,[n[1]||(n[1]=l("text",{x:"45",y:"60",class:"fill-white"},"0",-1)),n[2]||(n[2]=l("text",{x:"735",y:"60",class:"fill-white"},"199",-1)),n[3]||(n[3]=l("defs",null,[l("pattern",{id:"diagonalLines",patternUnits:"userSpaceOnUse",width:"10",height:"10",class:"-translate-x-[1px]"},[l("circle",{r:"0.5",cx:"1",cy:"1","stroke-width":"1",class:"fill-zinc-600"})])],-1)),l("rect",{x:y,y:k,width:g,height:I,class:"stroke-2 stroke-zinc-700",fill:"url(#diagonalLines)"}),l("g",$,[l("line",{x1:y,y1:k,x2:y+g-1,y2:k},null,8,H),l("line",{x1:y,y1:"70",x2:y,y2:"130"}),(p(!0),h(_,null,m(o.value,({x:t},i)=>(p(),h("line",{x1:t,y1:"90",x2:t,y2:"110",class:T(["duration-300 opacity-0",{"opacity-100":x.value}]),style:A(a(i,!0))},null,14,P))),256)),l("line",{x1:g+y,y1:"70",x2:g+y,y2:"130"},null,8,X)]),l("g",B,[(p(),h(_,null,m(M,t=>l("line",{x1:s(t),y1:"101",x2:s(t),y2:"549","stroke-dasharray":"10,5",class:"stroke-[1px] stroke-neutral-700"},null,8,U)),64))]),l("g",null,[(p(!0),h(_,null,m(o.value.slice(0,o.value.length-1),({x:t,y:i},f)=>(p(),h("line",{x1:t,y1:i,class:T(["duration-300 opacity-0 stroke-1 stroke-white",{"!opacity-100":x.value}]),"stroke-dasharray":"10,5","stroke-dashoffset":"0",style:A(a(f,!0))},[n[0]||(n[0]=l("animate",{attributeName:"stroke-dashoffset",from:"0",to:"-15",dur:"1s",repeatCount:"indefinite"},null,-1)),l("animate",{attributeName:"x2",values:`${t};${o.value[f+1].x}`,dur:"300ms",begin:`${a(f)}ms`,fill:"freeze"},null,8,Y),l("animate",{attributeName:"y2",values:`${i};${o.value[f+1].y}`,dur:"300ms",begin:`${a(f)}ms`,fill:"freeze"},null,8,Q)],14,V))),256))]),l("g",null,[(p(!0),h(_,null,m(o.value,({x:t,y:i},f)=>(p(),h("g",{class:T(["duration-300 opacity-0",{"!opacity-100":x.value}]),style:A(a(f,!0))},[l("text",{x:r(f).x,y:r(f).y,class:"text-xs fill-white"},R(c.orderedRequests[f]),9,W),f===0?(p(),h("g",j,[l("line",{x1:t-5,x2:t+5,y1:i+5,y2:i-5,class:"stroke-2 stroke-rose-600","stroke-linecap":"round"},null,8,J),l("line",{x1:t+5,x2:t-5,y1:i+5,y2:i-5,class:"stroke-2 stroke-rose-600","stroke-linecap":"round"},null,8,Z)])):(p(),h("circle",{key:1,r:"3",cx:t,cy:i,class:"stroke-1 fill-rose-500 stroke-rose-600 animate-breathe",style:A(`transform-origin: ${t}px ${i}px`)},null,12,ee))],6))),256))])])),l("div",te," Total Seek Time: "+R(c.totalSeekTime),1)],64))}};export{le as _,re as r};
