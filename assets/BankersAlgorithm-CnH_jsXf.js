import{s as L,h as n,o as s,e,l as m,m as f,F as b,i as w,p as H,j as P,k as y,d as R,b as B,u as S,I as X,c as U,a as z,r as Q,w as V,t as G,g as J,f as O,v as F,B as W}from"./index-D9u_6dsU.js";import{_ as K,a as q,b as Y,c as D}from"./TrashButton-DC0a_cT1.js";import{_ as E}from"./Alert--z4Ygn7g.js";const Z={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},_=L({name:"ArrowDown",render:function(i,l){return s(),n("svg",Z,l[0]||(l[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14"}),e("path",{d:"M18 13l-6 6"}),e("path",{d:"M6 13l6 6"})],-1)]))}}),ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},te=L({name:"Check",render:function(i,l){return s(),n("svg",ee,l[0]||(l[0]=[e("path",{d:"M5 12l5 5L20 7",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}}),se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},le=L({name:"ChevronRight",render:function(i,l){return s(),n("svg",se,l[0]||(l[0]=[e("path",{d:"M9 6l6 6l-6 6",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}}),ne={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},oe=L({name:"X",render:function(i,l){return s(),n("svg",ne,l[0]||(l[0]=[e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)]))}}),re={class:"flex justify-center mb-4 gap-x-2"},ae={class:"inline-block px-4 py-1 text-sm border rounded-md bg-zinc-800 border-zinc-700"},ie={class:"font-medium"},ue={class:"inline-block px-4 py-1 text-sm border rounded-md bg-zinc-800 border-zinc-700"},de={class:"font-medium"},ce={__name:"Tags",props:{processId:{type:Number,required:!0},runCount:{type:Number,required:!0}},setup(o){return(i,l)=>(s(),n("div",re,[e("div",ae,[l[0]||(l[0]=m(" Current Process: ")),e("span",ie,"P"+f(o.processId+1),1)]),e("div",ue,[l[1]||(l[1]=m(" Current Run Through Processes: ")),e("span",de,f(o.runCount),1)])]))}},me={class:"flex mx-auto mb-2 sm:w-4/5 justify-evenly"},he={__name:"ProcessBar",props:{numberOfProcesses:{type:Number,required:!0},processId:{type:Number,required:!0},finishedProcesses:{type:Array,default:()=>[]}},setup(o){return(i,l)=>(s(),n("div",me,[(s(!0),n(b,null,w(o.numberOfProcesses,r=>(s(),n("div",{class:H(["flex items-center justify-center border rounded-md border-zinc-700 w-10 sm:w-15 aspect-square bg-[size:10px_10px] font-medium",{"!border-cyan-600 bg-[image:repeating-linear-gradient(315deg,var(--color-cyan-600)_0,var(--color-cyan-600)_1px,_transparent_1px,_transparent_50%)]":r-1===o.processId,"!border-emerald-600":o.finishedProcesses.includes(r-1)&&r-1!==o.processId}])}," P"+f(r),3))),256))]))}},fe={class:"p-4 space-y-4 border rounded-md border-zinc-700"},pe={class:"flex flex-col gap-4 lg:items-center lg:flex-row"},ye={class:"overflow-x-scroll lg:!w-3/5"},be={class:"text-center"},we={class:"text-center"},ge={class:"text-center"},xe={class:"space-y-4 lg:w-2/5"},ve={key:0},ke={key:1},Ae={key:0,class:"flex flex-col gap-4 lg:items-center lg:flex-row"},Re={class:"overflow-x-scroll lg:!w-3/5"},Se={class:"text-center"},$e={class:"text-center"},qe={class:"text-center"},Pe={class:"text-center"},Ce={__name:"RunStepPanel",props:{curNeed:{type:Array,default:()=>[]},curAvailable:{type:Array,default:()=>[]},curAllocation:{type:Array,default:()=>[]},canRun:{type:Boolean,required:!0},processId:{type:Number,required:!0},numberOfResources:{type:Number,required:!0}},setup(o){return(i,l)=>(s(),n("div",fe,[e("div",pe,[e("div",ye,[e("table",null,[e("thead",null,[e("tr",null,[l[0]||(l[0]=e("th",null,null,-1)),(s(!0),n(b,null,w(o.numberOfResources,r=>(s(),n("th",be,"R"+f(r),1))),256))])]),e("tbody",null,[e("tr",null,[l[1]||(l[1]=e("td",null,"Need",-1)),(s(!0),n(b,null,w(o.curNeed,r=>(s(),n("td",we,f(r),1))),256))]),e("tr",null,[l[2]||(l[2]=e("td",null,"Available",-1)),(s(!0),n(b,null,w(o.curAvailable,r=>(s(),n("td",ge,f(r),1))),256))]),e("tr",null,[l[3]||(l[3]=e("td",null,"Need ≤ Available",-1)),(s(!0),n(b,null,w(o.curNeed,(r,u)=>(s(),n("td",null,[e("div",{class:H(["flex items-center justify-center w-5 mx-auto rounded-md aspect-square",{"bg-emerald-700":r<=o.curAvailable[u],"bg-rose-700":r>o.curAvailable[u]}])},[y(S(X),null,{default:R(()=>[r<=o.curAvailable[u]?(s(),B(S(te),{key:0})):(s(),B(S(oe),{key:1}))]),_:2},1024)],2)]))),256))])])])]),e("div",xe,[e("p",null," Compare the need for every resource of P"+f(o.processId+1)+" with the current available of each resource. ",1),o.canRun?(s(),n("p",ve,[m(" The need for every resource of P"+f(o.processId+1)+" ",1),l[4]||(l[4]=e("span",{class:"text-emerald-600"},"is less than or equal to",-1)),m(" the current available resources, so P"+f(o.processId+1)+" can run. ",1)])):(s(),n("p",ke,[m(" The need for every resource of P"+f(o.processId+1)+" is ",1),l[5]||(l[5]=e("span",{class:"text-rose-600"},"not less than or equal to",-1)),m(" the current available resources, so skip P"+f(o.processId+1)+". ",1)]))])]),o.canRun?(s(),n("div",Ae,[e("div",Re,[e("table",null,[e("thead",null,[e("tr",null,[l[6]||(l[6]=e("th",null,null,-1)),(s(!0),n(b,null,w(o.numberOfResources,r=>(s(),n("th",Se,"R"+f(r),1))),256))])]),e("tbody",null,[e("tr",null,[l[7]||(l[7]=e("td",null,"Allocation",-1)),(s(!0),n(b,null,w(o.curAllocation,r=>(s(),n("td",$e,f(r),1))),256))]),e("tr",null,[l[8]||(l[8]=e("td",null,"Available",-1)),(s(!0),n(b,null,w(o.curAvailable,r=>(s(),n("td",qe,f(r),1))),256))]),e("tr",null,[l[9]||(l[9]=e("td",null,"New Available",-1)),(s(!0),n(b,null,w(o.curAllocation,(r,u)=>(s(),n("td",Pe,f(r+o.curAvailable[u]),1))),256))])])])]),l[10]||(l[10]=e("div",{class:"space-y-4 lg:w-2/5"},[e("p",null," Simulate the system waiting for the process to complete and then releasing its resources. "),e("p",null," Add the released resources to the available to calculate the new one. ")],-1))])):P("",!0)]))}},Te={class:"p-4 rounded-md"},Be={key:0,class:"flex mt-10 justify-evenly"},Me={__name:"BankerSimulation",props:{processLog:{type:Array,default:()=>[]},numberOfProcesses:{type:Number,required:!0},numberOfResources:{type:Number,required:!0}},setup(o){const i=o,l=r=>r===i.processLog.length-1;return(r,u)=>(s(),n("div",null,[u[0]||(u[0]=e("p",{class:"mb-2 font-medium"},"Step by step solution:",-1)),u[1]||(u[1]=e("hr",{class:"mb-4 border-neutral-800"},null,-1)),(s(!0),n(b,null,w(o.processLog,(a,k)=>(s(),n("div",Te,[y(ce,{"process-id":a.processId,"run-count":a.runCount},null,8,["process-id","run-count"]),y(he,{"finished-processes":a.finished,"number-of-processes":o.numberOfProcesses,"process-id":a.processId},null,8,["finished-processes","number-of-processes","process-id"]),y(Ce,{"cur-need":a.need,"cur-available":a.available,"cur-allocation":a.allocation,"can-run":a.canRun,"process-id":a.processId,"number-of-resources":o.numberOfResources},null,8,["cur-need","cur-available","cur-allocation","can-run","process-id","number-of-resources"]),l(k)?P("",!0):(s(),n("div",Be,[y(S(X),{class:"text-6xl text-zinc-700"},{default:R(()=>[y(S(_))]),_:1})]))]))),256))]))}},Ie={class:"overflow-x-scroll"},Ne={class:"highlight-first-column"},ze={__name:"Need",props:{numberOfResources:{required:!0,type:Number},needMatrix:{type:Array,default:()=>[]}},setup(o){return(i,l)=>(s(),n("div",null,[l[1]||(l[1]=e("p",{class:"mb-2 font-medium"},"Need:",-1)),e("div",Ie,[e("table",null,[e("thead",null,[e("tr",null,[l[0]||(l[0]=e("th",null,"Process",-1)),(s(!0),n(b,null,w(o.numberOfResources,r=>(s(),n("th",null,"R"+f(r),1))),256))])]),e("tbody",Ne,[(s(!0),n(b,null,w(o.needMatrix,(r,u)=>(s(),n("tr",null,[e("td",null,"P"+f(u+1),1),(s(!0),n(b,null,w(r,a=>(s(),n("td",null,f(a),1))),256))]))),256))])])])]))}},Le={class:"p-4 border rounded-md border-zinc-700"},je={class:"flex justify-center gap-x-4"},Ve={class:"flex items-center justify-center mt-4"},Oe=["innerHTML"],Fe={__name:"SafeSequence",props:{formattedSafeSequence:{type:Array,default:()=>[]},isSystemInSafeState:{type:Boolean,required:!0}},setup(o){const i=o,l={safe:'Since there is a valid safe sequence which has been found and all processes have successfully been completed, the system <span class="text-emerald-500">is in a safe state.</span>',notSafe:'No valid safe sequence could be found, which means not all processes have successfully been completed, so the system <span class="text-rose-500">is not in a safe state.</span>'},r=U(()=>i.isSystemInSafeState?l.safe:l.notSafe);return(u,a)=>(s(),n("div",null,[a[1]||(a[1]=e("p",{class:"mb-2 font-medium"},"Final Safe Sequence:",-1)),a[2]||(a[2]=e("hr",{class:"mb-4 border-neutral-800"},null,-1)),e("div",Le,[e("div",je,[(s(!0),n(b,null,w(o.formattedSafeSequence,k=>(s(),n("div",{class:H(["flex items-center justify-center w-10 font-medium border rounded-md sm:w-15 aspect-square",{"border-rose-700 text-rose-500":k==="-","border-emerald-700 text-emerald-500":k!=="-"}])},f(k),3))),256))]),e("div",Ve,[a[0]||(a[0]=e("hr",{class:"w-4/5 translate-x-3 border-2 rounded-full border-zinc-700 sm:w-3/5 md:w-2/5"},null,-1)),y(S(X),{class:"text-4xl -translate-x-2.5 text-zinc-700"},{default:R(()=>[y(S(le))]),_:1})]),e("p",{class:"w-full mx-auto text-center sm:w-4/5",innerHTML:r.value},null,8,Oe)])]))}},We=({allocationMatrix:o,maxMatrix:i,resourceInstances:l})=>{const r=({i:p,runCount:g,isFinished:c,finished:t,need:d,available:h,allocation:v,canRun:x})=>{u.push({processId:p,runCount:g,isFinished:c,finished:Array.from(t),need:(d==null?void 0:d.slice())??null,canRun:x,available:(h==null?void 0:h.slice())??null,allocation:(v==null?void 0:v.slice())??null})},u=[],a=[],k=[],M=Array(l.length).fill(0);o.forEach(p=>{p.forEach((g,c)=>{M[c]+=g})});const $=l.map((p,g)=>p-M[g]);for(let p=0;p<o.length;p++){a.push([]);for(let g=0;g<i[p].length;g++){const c=i[p][g]-o[p][g];a[p][g]=c}}const A=new Set;let I=0,T=!0;for(;A.size<a.length&&T;){T=!1,I++;for(let p=0;p<a.length;p++){const g=a[p],c=o[p],t=A.has(p);if(t)continue;const d=!t&&g.every((v,x)=>v<=$[x]),h=$.slice();d&&(c.forEach((v,x)=>{$[x]+=v}),A.add(p),k.push(p),T=!0),r({i:p,runCount:I,isFinished:t,finished:A,need:g,canRun:d,available:h,allocation:d?c:null})}}const N=A.size===a.length;return{needMatrix:a,safeSequence:k,isSafe:N,processLog:u}},De={class:"mb-10 space-y-4"},Ee={class:"mb-10 space-y-4"},Ue={class:"flex items-end"},He=["disabled"],Xe={class:"mb-10 overflow-x-scroll"},Qe={class:"flex items-center gap-x-2"},Ge=["onUpdate:modelValue"],Je={class:"flex items-end sm:justify-end gap-x-2"},Ke=["disabled"],Ye={class:"flex flex-col gap-x-4 xl:flex-row gap-y-10"},Ze={class:"w-full overflow-x-scroll xl:w-1/2"},_e={key:0},et={class:"highlight-first-column"},tt=["onUpdate:modelValue"],st={key:0,class:"w-20"},lt={class:"w-full overflow-x-scroll xl:w-1/2"},nt={key:0},ot={class:"highlight-first-column"},rt=["onUpdate:modelValue"],at={key:0,class:"w-20"},it={key:0,class:"flex flex-col gap-y-16"},ut=6,dt=4,C=20,ft={__name:"BankersAlgorithm",setup(o){const i=z([10,5,7]),l=z([[0,1,0],[2,0,0],[3,0,2],[2,1,1],[0,0,2]]),r=z([[7,5,3],[3,2,2],[9,0,2],[2,2,2],[4,3,3]]),u=z({needMatrix:[],processLog:[],safeSequence:[],isSystemInSafeState:!1}),a=Q(null),k=Q(!1),M=U(()=>{const c=u.safeSequence.slice().map(t=>`P${t+1}`);for(;c.length<u.needMatrix.length;)c.push("-");return c}),$=U(()=>l.length),A=()=>{u.needMatrix.length=0,u.processLog.length=0,u.safeSequence.length=0,k.value=!1};V(i,A),V(l,A),V(r,A);const I=()=>{A();const c=new Array(i.length).fill(0);l.push(c),r.push(c)},T=()=>{const c=Math.floor(C/$.value);let t=Math.floor(Math.random()*3);for(let d=0;d<$.value;d++){const h=Math.floor(Math.random()*c);t+=h;const v=Math.floor(Math.random()*3),x=h+v;l[d].push(h),r[d].push(x)}t=t>C?C:t,i.push(t)},N=c=>{A(),l.splice(c,1),r.splice(c,1)},p=c=>{for(let t=0;t<$.value;t++)l[t].splice(c,1),r[t].splice(c,1);i.splice(c,1)},g=()=>{if(!a.value.checkValidity())return a.value.reportValidity();const{needMatrix:t,safeSequence:d,isSafe:h,processLog:v}=We({allocationMatrix:W(l).map(x=>x.slice()),maxMatrix:W(r).map(x=>x.slice()),resourceInstances:W(i).slice()});u.needMatrix=t,u.safeSequence=d,u.isSystemInSafeState=h,u.processLog=v,k.value=!0};return(c,t)=>(s(),B(Y,null,{[S(G).howItWorks.id]:R(()=>[e("div",De,[t[2]||(t[2]=e("p",null,[e("span",{class:"text-main"},"Banker's Algorithm"),m(" is a non-preemptive method of avoiding "),e("span",{class:"text-main"},"deadlocks"),m(" inside of a system with limited resources. Created by Edsger Dijkstra, the Banker's Algorithm works by avoiding the potential for any deadlocks which may occur altogether, in contrast to deadlock recovery methods. ")],-1)),y(E,{"alert-style":"note"},{default:R(()=>t[1]||(t[1]=[e("p",null,` The name "Banker's Algorithm" comes from how a bank lends money to its customers. Banks will only loan out money if they are certain they can fulfill all customer withdrawals, even in the worst case scenario. This ensures that there is always enough money in the bank to avoid bankruptcy. `,-1)])),_:1,__:[1]})]),t[42]||(t[42]=e("h2",{class:"mb-4 text-xl font-semibold"}," The Deadlock Problem ",-1)),t[43]||(t[43]=e("hr",{class:"mb-4 border-neutral-800"},null,-1)),e("div",Ee,[t[5]||(t[5]=e("p",null,[m(" In operating systems, a "),e("span",{class:"text-main"},"deadlock"),m(" occurs when multiple processes are waiting for resources that are held by each other. The processes are both holding the resources the other needs, and waiting for the other process to release their resources (which never happens since both sides are waiting). ")],-1)),t[6]||(t[6]=e("p",null," Consider the following illustration: ",-1)),y(q,{src:"/algorithms/deadlock-management/bankers-algorithm/deadlock.svg",caption:"An Example of a Deadlock",class:"max-w-xl"}),t[7]||(t[7]=e("p",null," Process A is using resource A, while process B is using resource B. Process A needs resource B to complete its own task, so it waits for process B to finish using resource B. However, process B needs resource A to do its job, so it also starts waiting for process A to finish its tasks. ",-1)),t[8]||(t[8]=e("p",null,[m(" Both processes are now waiting for one another. This situation is known as a "),e("span",{class:"text-main"},"deadlock"),m(". ")],-1)),t[9]||(t[9]=e("h2",{class:"mt-10 text-xl font-semibold"}," What is the Banker's Algorithm? ",-1)),t[10]||(t[10]=e("hr",{class:"mb-4 border-neutral-800"},null,-1)),t[11]||(t[11]=e("p",null," The banker's algorithm is a prevention technique used to avoid deadlocks, rather than letting them occur and then trying to resolve them. ",-1)),t[12]||(t[12]=e("p",null," Lets look at a real-world analogy to use the algorithm in. Imagine that you have a bag with a limited number of toys inside, and 3 picky children that want to play with the toys. ",-1)),y(q,{src:"/algorithms/deadlock-management/bankers-algorithm/toy-analogy.svg",class:"max-w-xl",caption:"A Toy Analogy for the Banker's Algorithm"}),t[13]||(t[13]=e("p",null," Each child wants to play with the toys they like, and if more than one child wants the same toy, they don't share. Instead they wait until the toy is free to play with. Once all of the toys they want are available, they begin playing. ",-1)),t[14]||(t[14]=e("p",null," We know what each child wants before they start playing, and we know what each child has: ",-1)),y(q,{src:"/algorithms/deadlock-management/bankers-algorithm/initial-toy-snapshot.svg",class:"max-w-xl",caption:"The Toys Each Child Has and Wants"}),t[15]||(t[15]=e("p",null," The algorithm tries to give the toys each child wants one by one. If it passed over all 3 children for a full turn without give any toys, it means a deadlock has occurred. ",-1)),t[16]||(t[16]=e("p",null," Child A has a circle toy, but needs a star toy which we don't have in our bag, so we skip this child for now. Child B wants a triangle and square toy, which we have! So we give the toys, wait for him to stop playing, then take the toys back: ",-1)),y(q,{src:"/algorithms/deadlock-management/bankers-algorithm/toy-allocation-1.svg",class:"max-w-xl",caption:"Fulfill Child B's Toy Wants"}),t[17]||(t[17]=e("p",null," Now we only have two children left, plus an additional star toy which child B was holding on to. ",-1)),t[18]||(t[18]=e("p",null," Moving on, child C wants a square, triangle, and circle toy to play with, however the only circle toy is occupied by child A, so we skip the child and begin our second toy run. ",-1)),t[19]||(t[19]=e("p",null," Child A wants a star toy, so we give the star toy, wait, then take all of their toys back. The only child left is child C, which gets a square, triangle and circle toy to play with: ",-1)),y(q,{src:"/algorithms/deadlock-management/bankers-algorithm/toy-allocation-2.svg",class:"max-w-md",caption:"Fulfill Child A's Toy Wants"}),t[20]||(t[20]=e("p",null,[m(" We then fulfill child C's toy wants, and finally, there are no more children left. Since we could find a valid order in which each child got to play with the toys they wanted (known formally as a "),e("span",{class:"text-main"},"safe sequence"),m("), we can conclude that it is possible to avoid deadlocks. ")],-1)),t[21]||(t[21]=e("p",null," Now lets say child B wanted a circle toy, instead of a square toy: ",-1)),y(q,{src:"/algorithms/deadlock-management/bankers-algorithm/toy-deadlock.svg",class:"max-w-xl",caption:"An Toy Deadlock Amongst the Children"}),t[22]||(t[22]=e("p",null," Quickly we can see, that we cannot fulfill the needs of any child. Child A has a circle and is waiting for child B's star, and child B has a star and is waiting for child A's circle; a deadlock has occurred. ",-1)),y(E,{alertStyle:"note"},{default:R(()=>t[3]||(t[3]=[e("div",{class:"space-y-4"},[e("p",null," The actual banker's algorithm runs exactly like this toy analogy, with the exception that it doesn't know how many of each resource (toy) each process (child) wants. Instead, it only knows the maximum number of resources a process could possibly request for. "),e("p",null,[m(" To solve this, it uses a "),e("span",{class:"text-main"},"need"),m(" value instead of the number of resources the process wants. The need value is the worst-case scenario value, where the process requests for all of the resources it can. ")])],-1)])),_:1,__:[3]}),t[23]||(t[23]=e("h2",{class:"mt-10 text-xl font-semibold"}," How the Algorithm Works ",-1)),t[24]||(t[24]=e("hr",{class:"mb-4 border-neutral-800"},null,-1)),t[25]||(t[25]=e("p",null,[m(" The algorithm is used in two ways: to check whether the system is currently in a "),e("span",{class:"text-main"},"safe state"),m(" (where its possible to allocate resources to all process in some order to avoid deadlock), and also to make sure there are enough resources to allocate when a new process requests access to a resource. ")],-1)),y(q,{src:"/algorithms/deadlock-management/bankers-algorithm/using-the-algorithm.svg",caption:"How the Banker's Algorithm Can Be Used",class:"max-w-xl"}),t[26]||(t[26]=e("p",null," To understand how the algorithm works, we will be using it to identify whether a system is in a safe state for the sake of simplicity. ",-1)),t[27]||(t[27]=e("p",null," To begin, we need an example snapshot of a system. The system will have 3 resource types (R1, R2, R3). The following table states the total number of resource instances available for allocation: ",-1)),t[28]||(t[28]=e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"R1"),e("th",null,"R2"),e("th",null,"R3")])]),e("tbody",null,[e("tr",null,[e("td",null,"8"),e("td",null,"3"),e("td",null,"4")])])],-1)),t[29]||(t[29]=e("p",null," The system will also have 3 running processes (P1, P2, P3): ",-1)),t[30]||(t[30]=e("div",{class:"flex flex-col gap-4 md:flex-row"},[e("div",{class:"w-full space-y-2 md:w-1/2"},[e("h3",{class:"font-medium"},"Allocation:"),e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Process"),e("th",null,"R1"),e("th",null,"R2"),e("th",null,"R3")])]),e("tbody",null,[e("tr",null,[e("td",null,"P1"),e("td",null,"0"),e("td",null,"1"),e("td",null,"0")]),e("tr",null,[e("td",null,"P2"),e("td",null,"2"),e("td",null,"0"),e("td",null,"0")]),e("tr",null,[e("td",null,"P3"),e("td",null,"3"),e("td",null,"0"),e("td",null,"2")])])])]),e("div",{class:"w-full space-y-2 md:w-1/2"},[e("h3",{class:"font-medium"},"Max:"),e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Process"),e("th",null,"R1"),e("th",null,"R2"),e("th",null,"R3")])]),e("tbody",null,[e("tr",null,[e("td",null,"P1"),e("td",null,"7"),e("td",null,"5"),e("td",null,"3")]),e("tr",null,[e("td",null,"P2"),e("td",null,"3"),e("td",null,"2"),e("td",null,"2")]),e("tr",null,[e("td",null,"P3"),e("td",null,"9"),e("td",null,"0"),e("td",null,"2")])])])])],-1)),t[31]||(t[31]=e("p",null,[m(" The "),e("span",{class:"text-main"},"allocation"),m(" table states how many instances of each resource type are already allocated (given to) each process. The "),e("span",{class:"text-main"},"max"),m(" table states the maximum amount of each resource type that a process may request for. ")],-1)),t[32]||(t[32]=e("p",null," The algorithm's work starts here. ",-1)),t[33]||(t[33]=e("p",null,[m(" First, it calculates the number of "),e("span",{class:"text-main"},"available"),m(" resources for each resource type. This is the number of resources currently available for allocation. The following calculation is used: ")],-1)),t[34]||(t[34]=e("p",{class:"italic"},"Total Instances - Σ Allocated Resources = Available",-1)),t[35]||(t[35]=e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"R1"),e("th",null,"R2"),e("th",null,"R3")])]),e("tbody",null,[e("tr",null,[e("td",null,"3"),e("td",null,"2"),e("td",null,"2")])])],-1)),t[36]||(t[36]=e("p",null,[m(" It then calculates the "),e("span",{class:"text-main"},"need"),m(" for each of the process's resources. This is the largest amount of resources of each resource type that a process can request for. The calculation is: ")],-1)),t[37]||(t[37]=e("p",{class:"italic"},"Max - Allocation = Need",-1)),t[38]||(t[38]=e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Process"),e("th",null,"R1"),e("th",null,"R2"),e("th",null,"R3")])]),e("tbody",null,[e("tr",null,[e("td",null,"P1"),e("td",null,"7"),e("td",null,"4"),e("td",null,"3")]),e("tr",null,[e("td",null,"P2"),e("td",null,"1"),e("td",null,"2"),e("td",null,"2")]),e("tr",null,[e("td",null,"P3"),e("td",null,"6"),e("td",null,"0"),e("td",null,"0")])])],-1)),t[39]||(t[39]=e("p",null,[m(" Now, the algorithm can simulate allocating resources to each process until a "),e("span",{class:"text-main"},"safe sequence"),m(" (order in which processes run in order to avoid deadlocks) is found, just like the toy analogy. ")],-1)),t[40]||(t[40]=e("p",null," What if a safe sequence can't be found? Then the system is not in a safe state, and a deadlock has occurred. ",-1)),y(E,{alertStyle:"note"},{default:R(()=>t[4]||(t[4]=[e("div",{class:"space-y-4"},[e("p",null," Note that after allocating resources to a process, the system waits until it finishes executing, and then takes back all of the resources the process was using, making them available for use by other processes. "),e("p",null," This is why the allocated resources of each process are added back to the available after a successful allocation attempt. ")],-1)])),_:1,__:[4]}),t[41]||(t[41]=e("p",null," To see a complete example of the banker's algorithm, see the algorithm visualizer on this page. ",-1))])]),[S(G).visualizer.id]:R(()=>[t[50]||(t[50]=e("h2",{class:"mb-4 text-xl font-semibold"}," Step by step illustration ",-1)),t[51]||(t[51]=e("hr",{class:"mb-4 border-neutral-800"},null,-1)),e("form",{ref_key:"form",ref:a,class:"w-full mb-10 space-y-4 gap-x-4"},[e("div",Ue,[t[44]||(t[44]=e("p",{class:"flex-1 font-medium"},"Resource Instances:",-1)),e("button",{class:"btn",type:"button",disabled:r.length===dt,onClick:T}," Add Resource ",8,He)]),e("div",Xe,[e("table",null,[e("thead",null,[e("tr",null,[(s(!0),n(b,null,w(i.length,d=>(s(),n("th",null,[e("div",Qe,[e("span",null,"R"+f(d),1),i.length>1?(s(),B(D,{key:0,onClick:h=>p(d-1)},null,8,["onClick"])):P("",!0)])]))),256))])]),e("tbody",null,[e("tr",null,[(s(!0),n(b,null,w(i.length,d=>(s(),n("td",null,[O(e("input",{type:"number",min:"1",max:C,required:"","onUpdate:modelValue":h=>i[d-1]=h},null,8,Ge),[[F,i[d-1]]])]))),256))])])])]),e("div",Je,[e("button",{class:"btn",type:"button",disabled:r.length===ut,onClick:I}," Add Process ",8,Ke)]),e("div",Ye,[e("div",Ze,[t[46]||(t[46]=e("div",{class:"w-full p-2 sm:-mb-2 sm:border sm:bg-zinc-800 sm:border-zinc-700 sm:rounded-t-md"},[e("h3",{class:"font-medium sm:mb-2 sm:text-center"}," Allocation ")],-1)),e("table",null,[e("thead",null,[e("tr",null,[t[45]||(t[45]=e("th",null,null,-1)),(s(!0),n(b,null,w(i.length,d=>(s(),n("th",null,"R"+f(d),1))),256)),l.length>1?(s(),n("th",_e)):P("",!0)])]),e("tbody",et,[(s(!0),n(b,null,w(l,(d,h)=>(s(),n("tr",null,[e("td",null,"P"+f(h+1),1),(s(!0),n(b,null,w(d,(v,x)=>(s(),n("td",null,[O(e("input",{type:"number",min:"0",max:C,required:"","onUpdate:modelValue":j=>l[h][x]=j},null,8,tt),[[F,l[h][x]]])]))),256)),l.length>1?(s(),n("td",st,[y(D,{onClick:v=>N(h)},null,8,["onClick"])])):P("",!0)]))),256))])])]),e("div",lt,[t[48]||(t[48]=e("div",{class:"w-full p-2 sm:-mb-2 sm:border sm:bg-zinc-800 sm:border-zinc-700 sm:rounded-t-md"},[e("h3",{class:"font-medium sm:mb-2 sm:text-center"}," Max ")],-1)),e("table",null,[e("thead",null,[e("tr",null,[t[47]||(t[47]=e("th",null,null,-1)),(s(!0),n(b,null,w(i.length,d=>(s(),n("th",null,"R"+f(d),1))),256)),r.length>1?(s(),n("th",nt)):P("",!0)])]),e("tbody",ot,[(s(!0),n(b,null,w(r,(d,h)=>(s(),n("tr",null,[e("td",null,"P"+f(h+1),1),(s(!0),n(b,null,w(d,(v,x)=>(s(),n("td",null,[O(e("input",{type:"number",min:"0",max:C,required:"","onUpdate:modelValue":j=>r[h][x]=j},null,8,rt),[[F,r[h][x]]])]))),256)),r.length>1?(s(),n("td",at,[y(D,{onClick:v=>N(h)},null,8,["onClick"])])):P("",!0)]))),256))])])])]),e("button",{type:"submit",class:"btn",onClick:J(g,["prevent"])},"Run Algorithm")],512),t[52]||(t[52]=e("h1",{class:"mb-4 text-xl font-semibold"}," Results ",-1)),t[53]||(t[53]=e("hr",{class:"mb-4 border-neutral-800"},null,-1)),k.value?(s(),n("div",it,[y(ze,{"number-of-resources":i.length,"need-matrix":u.needMatrix},null,8,["number-of-resources","need-matrix"]),y(Me,{"process-log":u.processLog,"number-of-processes":l.length,"number-of-resources":i.length},null,8,["process-log","number-of-processes","number-of-resources"]),y(Fe,{"formatted-safe-sequence":M.value,"is-system-in-safe-state":u.isSystemInSafeState},null,8,["formatted-safe-sequence","is-system-in-safe-state"])])):(s(),B(K,{key:1},{default:R(()=>[t[49]||(t[49]=e("p",{class:"mb-4"}," No results to display yet, try running the algorithm... ",-1)),e("button",{onClick:t[0]||(t[0]=J(()=>g(c.parameters),["prevent"])),class:"btn"}," Run Algorithm ")]),_:1,__:[49]}))]),_:2},1024))}};export{ft as default};
